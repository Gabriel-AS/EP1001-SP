<!DOCTYPE html>
<html>
    
    <head>
        <title>Embedded Programming</title>
        <style>
            body {background-color: #202020}
            h1   {text-align: center; background-color: #9A9A9A; color: #202020}
            h2   {text-align: center; color: #2B8094;}
            h3   {text-align: center; color: whitesmoke;}
            h4   {text-align: center; color: whitesmoke;}
            p    {text-align: center; color: aliceblue;}
            a    {text-align: center; color: aliceblue;}
    </style>
        
    </head>
    <body>
        
        <h1>EP1001</h1>
        <h2>Embedded Programming</h2>
        
        <h3><kbd>The Programmer</kbd></h3>
        
        <p><kbd>
            The first step is to get the toolchain on your computer. This will heavily reference the<br>
            instructions for building FabTinyISP, linked here:</kbd></p>
            
        <p><a href="http://fab.cba.mit.edu/classes/863.16/doc/projects/ftsmin/index.html">FabTinyISP</a><br><p>
        
        <p><kbd>
            Scroll down and you'll come to the instructions for Software installation. This is assuming<br>
            you have made the board, finished soldering it, and confident that the circuit is not about<br>
            to short out one of your USB ports. There are seperate instructions depending on your OS, windows<br>
            MacOS or even Linux. This will focus on windows, which happens to be the least straightforward.<br>
            </kbd></p>
            
        <p><kbd>
            Programming your Programmer, requires a working programmer. Plug in the working programmer, and<br>
            open up your device manager, somewhere you should be able to see working programmer listed as USBtinySPI.<br>
            After that you can start downloading the toolchain from that link above.<br>
            I recommend not deviating from those instructions in any way, even where to Extract the files to. <br>
            One thing to note, there is a step that involves a program called Zadig, Disconnect all<br>
            other USB devices, and be very sure which device you are targetting. And if you are worried you might<br>
            mess it up, try this process on a laptop first, and not your expensive PC. 
            </kbd></p>
            
         <p><kbd>
            I had no photos of this process, as I had been trying and failing over the course of the past 2 months,<br>
            and only recently managed to get it working. The most I have from it is the sanity check right at the end,<br>
            which is used to tell if all the programs in the toolchain are running right. That should run fine, if it<br>
            does show some errors like "command not found", best strategy is to read the documentation, and ask for help.<br>
            </kbd></p>
             
          <p><kbd>
            Now go back to the main page, and download a file called fts_firmware_bdm_v1, and extract it to somewhere easy<br>
            to get to like the C drive main directory. Go in and open the file named Makefile<br>
           </kbd></p>
        
             <p>
            <img alt="-Insert makefile location-" src= "https://gabriel-as.github.io/EP1001-SP/photo_2020-05-08_12-53-16.jpg" height="500"/>
            </p>
        
          <p><kbd> 
            open it in something like Brackets or notepad, and change this highlighted line<br>
            MCU = attiny45. Our board uses an attiny85 chip, so that line has to change<br>
            to MCU = attiny85. Hit save, and keep that file open for reference.
            </kbd></p>
            
            <p>
            <img alt="-Insert makefile text-" src= "https://gabriel-as.github.io/EP1001-SP/photo_2020-05-08_12-53-16.jpg" height="500"/>
            </p>
        
        <p><kbd>
            Now open up your command prompt, and follow these commands, in this order.
            </kbd></p>
        <p><kbd>
            <strong>avrdude -c usbtiny -p t85</strong><br>
            you can go in and see what this does if you enter just <strong>avrdude</strong>
            </kbd></p>
        <p><kbd>
            <strong>cd c:\fts_firmware_bdm_v1</strong><br>
            this step is just to enter the directory of where your fts_firmware_bdm_v1 file is,<br>
            in my case its in that directory, so change it to yours if its not the same.<br>
            </kbd></p>
        <p><kbd>
            <strong>dir</strong><br>
            </kbd></p>
        <p><kbd>
            <strong>make</strong><br>
            this will build a .hex file<br>
            </kbd></p>
        <p><kbd>
            <strong>dir</strong><br>
            </kbd></p>
        <p><kbd>
            <strong>make flash</strong><br>
            this will use the working programmer, and load this onto the target programmer<br>
            </kbd></p>
        <p><kbd>
            <strong>make fuses</strong><br>
            this will program fuse bits onto the target chip, which will be blown out later<br>
            </kbd></p>
        <p><kbd>
            <strong>make rstdisbl</strong><br>
            this will blow out the fuses on the target programmer, Locking it into its state as a programmer<br>
            which also means that you Only do this when you are sure everything went right.<br>
            </kbd></p>
        <p><kbd>
            you now have a working usb programmer, so we can use it to program our custom boards.<br>
            </kbd></p>
        
        <h3><kbd>The Hello World Board</kbd></h3>
      
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Main.html">Homepage</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part1.html">Electronics Production</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part2.html">Electronics Design</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part3.html">Embedded Programming</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part4.html">2D Computer Controlled Machining</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part5.html">3D Machining</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part6.html">Moulding and Casting</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part7.html">Interfacing & Applications Programming</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part8.html">Introduction to IoT</a><br><p>
        <p><a href="https://gabriel-as.github.io/EP1001-SP/Part9.html">Final Project</a><br><p>
        
           <!--<em>Text in italic</em>
               Text in plain
               <kbd>Text in 80s keyboard font</kbd>
               <strong>Text in Bold</strong> -->
        
    </body>
</html>
